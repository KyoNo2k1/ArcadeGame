{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useState } from \"react\";\nimport axios from 'axios';\nimport DialogBox from '../DialogBox/dialog-box';\n\nconst useForm = (FormType, validator, setUser, setShowForm) => {\n  _s();\n\n  const default_values = () => {\n    if (FormType === \"Login\") {\n      return {\n        Email: \"\",\n        Password: \"\"\n      };\n    }\n\n    if (FormType === \"SignUp\") {\n      return {\n        Full_name: \"\",\n        Email: \"\",\n        Password: \"\",\n        Confirm_password: \"\",\n        Gender: null\n      };\n    }\n\n    if (FormType === \"ForgotPassword\") {\n      return {\n        Email: \"\"\n      };\n    }\n  };\n\n  const [values, setValues] = useState(default_values);\n  const [showDialog, setShowDialog] = useState(false);\n\n  const handleChange = e => {\n    var {\n      name,\n      value\n    } = e.target;\n\n    if (name === \"Gender\") {\n      value = Number(value);\n    }\n\n    setValues({ ...values,\n      [name]: value\n    });\n  };\n\n  const [errors, setErrors] = useState({});\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    setErrors(validator(FormType, values));\n\n    if (Object.keys(errors).length === 0) {\n      if (FormType === \"Login\") {\n        axios.post('user/login', values).then(res => {\n          if (res.data.message === 'Authentication successful!') {\n            localStorage.setItem('token', res.data.token);\n            setUser(res.data.user);\n            setShowForm(false);\n          }\n        }).catch(err => setErrors(validator(FormType, 'Wrong email or password!')));\n      }\n\n      if (FormType === \"SignUp\") {\n        axios.post('user/sign-up', values).then(res => {\n          console.log(res);\n          setShowForm(false);\n        }).catch(err => console.log(err));\n      }\n\n      if (FormType === \"ForgotPassword\") {\n        axios.post('user/forgot-password', values).then(res => {\n          console.log(res);\n          setShowForm(false);\n        }).catch(err => console.log(err));\n      }\n\n      setValues(default_values);\n    }\n  };\n\n  return {\n    handleSubmit,\n    handleChange,\n    values,\n    errors\n  };\n};\n\n_s(useForm, \"0Y3AjMgVlP/nCGZVvZfh8a2Wp78=\");\n\nexport default useForm;","map":{"version":3,"sources":["E:/CNTT/MyProjects/arcade/front-end/user_website/src/Components/Popup/Form/useForm.jsx"],"names":["useState","axios","DialogBox","useForm","FormType","validator","setUser","setShowForm","default_values","Email","Password","Full_name","Confirm_password","Gender","values","setValues","showDialog","setShowDialog","handleChange","e","name","value","target","Number","errors","setErrors","handleSubmit","preventDefault","Object","keys","length","post","then","res","data","message","localStorage","setItem","token","user","catch","err","console","log"],"mappings":"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","sourcesContent":["import { useState } from \"react\";\r\nimport axios from 'axios'\r\n\r\nimport DialogBox from '../DialogBox/dialog-box'\r\n\r\nconst useForm = (FormType, validator, setUser, setShowForm) => {\r\n\r\n    const default_values = () => {\r\n        if (FormType === \"Login\"){\r\n            return {\r\n                Email: \"\",\r\n                Password: \"\"\r\n            }\r\n        }\r\n        if (FormType === \"SignUp\"){\r\n            return {\r\n                Full_name: \"\",\r\n                Email: \"\",\r\n                Password: \"\",\r\n                Confirm_password: \"\",\r\n                Gender: null\r\n            }\r\n        }\r\n\r\n        if (FormType === \"ForgotPassword\"){\r\n            return {\r\n                Email: \"\"\r\n            }\r\n        }\r\n    }\r\n\r\n    const [values, setValues] = useState(default_values)\r\n    const [showDialog, setShowDialog] = useState(false)\r\n\r\n    const handleChange = e => {\r\n        var { name, value } = e.target\r\n        if (name === \"Gender\"){\r\n            value = Number(value)\r\n        }\r\n        setValues({\r\n            ...values,\r\n            [name]: value\r\n        })\r\n    }\r\n\r\n    const [errors, setErrors] = useState({});\r\n\r\n    const handleSubmit = e => {\r\n        e.preventDefault();\r\n        \r\n        setErrors(validator(FormType, values));\r\n\r\n        if (Object.keys(errors).length === 0){\r\n            if (FormType === \"Login\"){\r\n                axios.post('user/login', values).then(\r\n                    res => {\r\n                        if (res.data.message === 'Authentication successful!'){\r\n                            localStorage.setItem('token', res.data.token)\r\n                            setUser(res.data.user)\r\n                            setShowForm(false)\r\n                        }\r\n                    }\r\n                ).catch(\r\n                    err => setErrors(validator(FormType, 'Wrong email or password!'))\r\n                )  \r\n            }\r\n            if (FormType === \"SignUp\"){\r\n                axios.post('user/sign-up', values).then(\r\n                    res => {\r\n                        console.log(res)\r\n                        setShowForm(false)\r\n                    }\r\n                ).catch(\r\n                    err => console.log(err)\r\n                )\r\n            }\r\n    \r\n            if (FormType === \"ForgotPassword\"){\r\n                axios.post('user/forgot-password', values).then(\r\n                    res => {\r\n                        console.log(res)\r\n                        setShowForm(false)\r\n                    }\r\n                ).catch(\r\n                    err => console.log(err)\r\n                )\r\n            }\r\n            setValues(default_values)\r\n        }   \r\n    }\r\n\r\n    return { handleSubmit, handleChange, values , errors }\r\n}\r\n\r\nexport default useForm;"]},"metadata":{},"sourceType":"module"}